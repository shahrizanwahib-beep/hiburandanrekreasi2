<!doctype html>
<html lang="ms">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Jenis Kata - Hiburan dan Rekreasi</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&amp;display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Inter', system-ui, sans-serif; 
      background: #ffffff;
      min-height: 100%;
      color: #1e293b; 
      box-sizing: border-box;
    }
    html, body { height: 100%; }
    
    .slide-container { 
      background: transparent;
      padding: 2rem 1rem; 
      margin: 0;
      position: relative;
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .btn { 
      padding: 1rem 2rem; 
      border-radius: 16px; 
      font-weight: 600; 
      cursor: pointer; 
      border: none; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      font-size: 1rem;
      position: relative;
      overflow: hidden;
    }
    
    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: left 0.5s;
    }
    
    .btn:hover::before {
      left: 100%;
    }
    
    .btn-primary { 
      background: linear-gradient(135deg, #3b82f6, #1d4ed8);
      color: white;
      box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
    }
    .btn-primary:hover { 
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(59, 130, 246, 0.4);
    }
    
    .btn-secondary { 
      background: linear-gradient(135deg, #ec4899, #be185d);
      color: white;
      box-shadow: 0 10px 25px rgba(236, 72, 153, 0.3);
    }
    .btn-secondary:hover { 
      transform: translateY(-2px);
      box-shadow: 0 15px 35px rgba(236, 72, 153, 0.4);
    }
    
    .word-card { 
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border: 2px solid rgba(255, 255, 255, 0.3); 
      border-radius: 16px; 
      padding: 1.5rem; 
      margin: 0.75rem; 
      cursor: pointer; 
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .word-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      opacity: 0;
      transition: opacity 0.3s;
    }
    
    .word-card:hover::before {
      opacity: 1;
    }
    
    .word-card:hover { 
      transform: translateY(-8px) scale(1.02);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
    }
    
    .category-noun { 
      border-color: #f59e0b; 
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      box-shadow: 0 8px 25px rgba(245, 158, 11, 0.2);
    }
    .category-verb { 
      border-color: #10b981; 
      background: linear-gradient(135deg, #d1fae5, #a7f3d0);
      box-shadow: 0 8px 25px rgba(16, 185, 129, 0.2);
    }
    .category-adjective { 
      border-color: #ec4899; 
      background: linear-gradient(135deg, #fce7f3, #fbcfe8);
      box-shadow: 0 8px 25px rgba(236, 72, 153, 0.2);
    }
    .category-adverb { 
      border-color: #8b5cf6; 
      background: linear-gradient(135deg, #ede9fe, #ddd6fe);
      box-shadow: 0 8px 25px rgba(139, 92, 246, 0.2);
    }
    
    .progress-container {
      background: #f1f5f9;
      border-radius: 20px;
      padding: 0.5rem;
      margin-bottom: 2rem;
      max-width: 1400px;
      margin: 0 auto 2rem auto;
      border: 1px solid #e2e8f0;
    }
    
    .progress-bar {
      background: linear-gradient(90deg, #3b82f6, #8b5cf6);
      border-radius: 16px;
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }
    
    .nav-container {
      background: #f8fafc;
      border-radius: 20px;
      padding: 1.5rem;
      border: 1px solid #e2e8f0;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      max-width: 1400px;
      margin: 0 auto;
    }
    
    .slide-title {
      background: linear-gradient(135deg, #3b82f6, #8b5cf6);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-weight: 800;
      text-align: center;
      margin-bottom: 3rem;
      font-size: 4rem;
      line-height: 1.1;
    }
    
    .category-card {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(15px);
      border-radius: 20px;
      padding: 2rem;
      border: 1px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }
    
    .category-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      border-radius: 20px 20px 0 0;
    }
    
    .category-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    }
    
    .category-card.noun::before { background: linear-gradient(90deg, #f59e0b, #fbbf24); }
    .category-card.verb::before { background: linear-gradient(90deg, #10b981, #34d399); }
    .category-card.adjective::before { background: linear-gradient(90deg, #ec4899, #f472b6); }
    .category-card.adverb::before { background: linear-gradient(90deg, #8b5cf6, #a78bfa); }
    
    .example-sentence {
      background: rgba(59, 130, 246, 0.1);
      border-left: 4px solid #3b82f6;
      border-radius: 0 12px 12px 0;
      padding: 1.5rem;
      margin: 1rem 0;
      font-style: italic;
      backdrop-filter: blur(10px);
    }
    
    .interactive-word {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 8px;
      transition: all 0.2s;
      cursor: pointer;
      position: relative;
    }
    
    .interactive-word:hover {
      transform: scale(1.05);
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .animate-fade-in {
      animation: fadeInUp 0.6s ease-out;
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 16px;
    }
    
    .selected-word {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
      border: 3px solid #3b82f6 !important;
      animation: pulse 1.5s infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="min-h-full">
  <div class="container mx-auto px-4 py-8"><!-- Progress Bar -->
   <div class="progress-container">
    <div id="progress-bar" class="progress-bar h-3" style="width: 8%"></div>
   </div><!-- Main Content -->
   <div id="slide-content" class="slide-container"><!-- Content will be rendered here -->
   </div><!-- Navigation -->
   <div class="nav-container">
    <div class="flex justify-between items-center"><button id="prev-btn" class="btn btn-secondary" onclick="previousSlide()">‚Üê Sebelumnya</button>
     <div class="text-center">
      <div id="slide-counter" class="text-lg font-bold text-gray-800">
       Slaid 1 / 9
      </div>
      <div class="text-sm text-gray-600 mt-1">
       Tekan 'F' untuk skrin penuh ‚Ä¢ ‚Üê ‚Üí untuk navigasi
      </div>
     </div><button id="next-btn" class="btn btn-primary" onclick="nextSlide()">Seterusnya ‚Üí</button>
    </div>
   </div>
  </div>
  <script>
    // Configuration
    const defaultConfig = {
      presentation_title: "Jenis Kata - Hiburan dan Rekreasi",
      topic_theme: "Hiburan dan Rekreasi"
    };

    let currentSlide = 0;
    let selectedAnswers = {};

    const slides = [
      {
        title: "Jenis Kata dalam Hiburan",
        content: `
          <div class="text-center animate-fade-in">
            <div class="mb-8">
              <div class="inline-block p-4 rounded-full glass-effect mb-6">
                <div class="text-6xl">üé≠</div>
              </div>
            </div>
            <h1 class="slide-title text-8xl mb-8">Jenis Kata</h1>
            <h2 class="text-6xl mb-12 font-light text-gray-600">Hiburan dan Rekreasi</h2>
            <div class="max-w-4xl mx-auto p-8">
              <p class="text-3xl text-gray-700 leading-relaxed">Mari belajar mengenal pasti kata nama, kata kerja, kata adjektif, dan kata keterangan dalam konteks yang menarik!</p>
              <div class="mt-8 p-6 bg-blue-50 rounded-2xl">
                <p class="text-xl text-blue-800"><strong>English:</strong> Let's learn to identify nouns, verbs, adjectives, and adverbs in an exciting context!</p>
              </div>
            </div>
          </div>
        `
      },
      {
        title: "4 Jenis Kata Utama",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-6xl mb-8">4 Jenis Kata Utama</h2>
            <div class="text-center mb-8 p-4 bg-gray-50 rounded-2xl">
              <p class="text-xl text-gray-700"><strong>English:</strong> 4 Main Types of Words</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8">
              <div class="category-card noun">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">üè∑Ô∏è</div>
                  <div>
                    <h3 class="text-4xl font-bold text-yellow-700">Kata Nama</h3>
                    <p class="text-xl text-yellow-600">Nama orang, tempat, benda, atau idea</p>
                    <p class="text-lg text-yellow-500 italic">English: Nouns (person, place, thing, idea)</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">filem <small>(movie)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">teater <small>(theater)</small></span>
                  <span class="px-6 py-3 bg-yellow-100 text-yellow-800 rounded-full font-medium text-lg">penonton <small>(audience)</small></span>
                </div>
              </div>
              <div class="category-card verb">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">‚ö°</div>
                  <div>
                    <h3 class="text-4xl font-bold text-green-700">Kata Kerja</h3>
                    <p class="text-xl text-green-600">Perbuatan atau tindakan</p>
                    <p class="text-lg text-green-500 italic">English: Verbs (action words)</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-green-100 text-green-800 rounded-full font-medium text-lg">menonton <small>(watch)</small></span>
                  <span class="px-6 py-3 bg-green-100 text-green-800 rounded-full font-medium text-lg">bermain <small>(play)</small></span>
                  <span class="px-6 py-3 bg-green-100 text-green-800 rounded-full font-medium text-lg">menari <small>(dance)</small></span>
                </div>
              </div>
              <div class="category-card adjective">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">üé®</div>
                  <div>
                    <h3 class="text-4xl font-bold text-pink-700">Kata Adjektif</h3>
                    <p class="text-xl text-pink-600">Sifat atau keadaan</p>
                    <p class="text-lg text-pink-500 italic">English: Adjectives (describing words)</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-pink-100 text-pink-800 rounded-full font-medium text-lg">menarik <small>(interesting)</small></span>
                  <span class="px-6 py-3 bg-pink-100 text-pink-800 rounded-full font-medium text-lg">meriah <small>(lively)</small></span>
                  <span class="px-6 py-3 bg-pink-100 text-pink-800 rounded-full font-medium text-lg">lucu <small>(funny)</small></span>
                </div>
              </div>
              <div class="category-card adverb">
                <div class="flex items-center mb-4">
                  <div class="text-4xl mr-4">üìç</div>
                  <div>
                    <h3 class="text-4xl font-bold text-purple-700">Kata Keterangan</h3>
                    <p class="text-xl text-purple-600">Menerangkan cara, waktu, tempat</p>
                    <p class="text-lg text-purple-500 italic">English: Adverbs (how, when, where)</p>
                  </div>
                </div>
                <div class="flex flex-wrap gap-2">
                  <span class="px-6 py-3 bg-purple-100 text-purple-800 rounded-full font-medium text-lg">dengan gembira <small>(happily)</small></span>
                  <span class="px-6 py-3 bg-purple-100 text-purple-800 rounded-full font-medium text-lg">di panggung <small>(on stage)</small></span>
                </div>
              </div>
            </div>
          </div>
        `
      },
      {
        title: "Kata Nama dalam Hiburan",
        content: `
          <h2 class="text-3xl font-bold mb-6 text-center text-yellow-600">üè∑Ô∏è Kata Nama dalam Hiburan</h2>
          <p class="text-lg mb-6 text-center">Kata nama merujuk kepada orang, tempat, benda, atau idea berkaitan hiburan.</p>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div class="p-4 bg-yellow-50 rounded-lg">
              <h4 class="font-bold mb-3 text-yellow-700">Tempat Hiburan:</h4>
              <div class="space-y-2">
                <div class="word-card category-noun">panggung</div>
                <div class="word-card category-noun">pawagam</div>
                <div class="word-card category-noun">stadium</div>
              </div>
            </div>
            <div class="p-4 bg-yellow-50 rounded-lg">
              <h4 class="font-bold mb-3 text-yellow-700">Orang dalam Hiburan:</h4>
              <div class="space-y-2">
                <div class="word-card category-noun">pelakon</div>
                <div class="word-card category-noun">penyanyi</div>
                <div class="word-card category-noun">penonton</div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400">
            <p class="text-lg italic">"Penonton bersorak di stadium semasa konsert."</p>
          </div>
        `
      },
      {
        title: "Kata Kerja dalam Hiburan",
        content: `
          <h2 class="text-3xl font-bold mb-6 text-center text-green-600">‚ö° Kata Kerja dalam Hiburan</h2>
          <p class="text-lg mb-6 text-center">Kata kerja menunjukkan perbuatan atau tindakan dalam aktiviti hiburan.</p>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div class="p-4 bg-green-50 rounded-lg">
              <h4 class="font-bold mb-3 text-green-700">Aktiviti Menonton:</h4>
              <div class="space-y-2">
                <div class="word-card category-verb">menonton</div>
                <div class="word-card category-verb">melihat</div>
                <div class="word-card category-verb">menyaksikan</div>
              </div>
            </div>
            <div class="p-4 bg-green-50 rounded-lg">
              <h4 class="font-bold mb-3 text-green-700">Aktiviti Berpartisipasi:</h4>
              <div class="space-y-2">
                <div class="word-card category-verb">bermain</div>
                <div class="word-card category-verb">menari</div>
                <div class="word-card category-verb">bernyanyi</div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400">
            <p class="text-lg italic">"Kami menonton filem komedi di pawagam."</p>
          </div>
        `
      },
      {
        title: "Kata Adjektif dalam Hiburan",
        content: `
          <h2 class="text-3xl font-bold mb-6 text-center text-pink-600">üé® Kata Adjektif dalam Hiburan</h2>
          <p class="text-lg mb-6 text-center">Kata adjektif menggambarkan sifat atau kualiti berkaitan hiburan.</p>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div class="p-4 bg-pink-50 rounded-lg">
              <h4 class="font-bold mb-3 text-pink-700">Perasaan Positif:</h4>
              <div class="space-y-2">
                <div class="word-card category-adjective">menghiburkan</div>
                <div class="word-card category-adjective">menarik</div>
                <div class="word-card category-adjective">menggembirakan</div>
              </div>
            </div>
            <div class="p-4 bg-pink-50 rounded-lg">
              <h4 class="font-bold mb-3 text-pink-700">Suasana:</h4>
              <div class="space-y-2">
                <div class="word-card category-adjective">meriah</div>
                <div class="word-card category-adjective">santai</div>
                <div class="word-card category-adjective">romantik</div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400">
            <p class="text-lg italic">"Pertunjukan itu sangat menghiburkan dan menarik."</p>
          </div>
        `
      },
      {
        title: "Kata Keterangan dalam Hiburan",
        content: `
          <h2 class="text-3xl font-bold mb-6 text-center text-purple-600">üìç Kata Keterangan dalam Hiburan</h2>
          <p class="text-lg mb-6 text-center">Kata keterangan menerangkan cara, waktu, atau tempat dalam aktiviti hiburan.</p>
          
          <div class="grid md:grid-cols-2 gap-6">
            <div class="p-4 bg-purple-50 rounded-lg">
              <h4 class="font-bold mb-3 text-purple-700">Cara (Bagaimana):</h4>
              <div class="space-y-2">
                <div class="word-card category-adverb">dengan gembira</div>
                <div class="word-card category-adverb">secara live</div>
                <div class="word-card category-adverb">dengan semangat</div>
              </div>
            </div>
            <div class="p-4 bg-purple-50 rounded-lg">
              <h4 class="font-bold mb-3 text-purple-700">Tempat (Di mana):</h4>
              <div class="space-y-2">
                <div class="word-card category-adverb">di panggung</div>
                <div class="word-card category-adverb">di rumah</div>
                <div class="word-card category-adverb">di taman</div>
              </div>
            </div>
          </div>
          
          <div class="mt-6 p-4 bg-blue-50 border-l-4 border-blue-400">
            <p class="text-lg italic">"Mereka menari dengan gembira di atas pentas."</p>
          </div>
        `
      },
      {
        title: "Aktiviti 1: Padankan Gambar dengan Kata",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-4xl mb-6">üì∏ Aktiviti 1: Padankan Gambar dengan Kata</h2>
            <div class="text-center mb-6 p-4 bg-gray-50 rounded-2xl">
              <p class="text-lg text-gray-700"><strong>English:</strong> Activity 1: Match Pictures with Words</p>
              <p class="text-md text-gray-600">üñ±Ô∏è Klik kata, kemudian klik gambar yang sesuai (Click word, then click matching picture)</p>
              <p class="text-sm text-blue-600">üí° Tip: Kata yang dipilih akan bersinar biru!</p>
            </div>
            
            <div class="grid lg:grid-cols-2 gap-6">
              <div class="p-4 bg-white rounded-2xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-center text-blue-700">üñºÔ∏è Gambar (Pictures)</h3>
                <div id="all-pictures-grid" class="grid grid-cols-5 gap-3">
                  <!-- All 40 pictures will be loaded here -->
                </div>
              </div>
              
              <div class="p-4 bg-white rounded-2xl shadow-lg">
                <h3 class="text-xl font-bold mb-4 text-center text-green-700">üìù Kata-kata (Words)</h3>
                <div id="all-word-options" class="grid grid-cols-2 gap-2">
                  <!-- All 40 randomized words will be loaded here -->
                </div>
              </div>
            </div>
            
            <div id="activity1-feedback" class="mt-6 text-center"></div>
            <div class="mt-4 text-center">
              <div id="progress-display" class="text-lg font-bold text-blue-600">Kemajuan: 0 / 40 padanan betul</div>
            </div>
          </div>
        `
      },
      {
        title: "Aktiviti 2: Susun Ayat & Kenal Pasti Kata",
        content: `
          <div class="animate-fade-in">
            <h2 class="slide-title text-3xl mb-4">üß© Aktiviti 2: Susun Ayat & Kenal Pasti Kata</h2>
            <div class="text-center mb-4 p-3 bg-gray-50 rounded-2xl">
              <p class="text-md text-gray-700"><strong>English:</strong> Activity 2: Build Sentences & Identify Words</p>
              <p class="text-sm text-gray-600">Complete all 10 sentence building exercises below</p>
            </div>
            
            <!-- All Sentence Building Exercises -->
            <div class="mb-6 p-4 bg-green-50 rounded-2xl border-2 border-green-200">
              <h3 class="text-xl font-bold mb-3 text-center text-green-700">üß© Susun Ayat (Build Sentences)</h3>
              <div class="text-center mb-3">
                <div id="sentence-progress" class="text-md font-bold text-green-600">Kemajuan: 0 / 10 ayat siap</div>
              </div>
              
              <div id="all-sentence-exercises" class="space-y-4">
                <!-- All 10 sentence exercises will be loaded here -->
              </div>
            </div>

            <!-- Word Analysis Section -->
            <div class="p-4 bg-purple-50 rounded-2xl border-2 border-purple-200">
              <h3 class="text-xl font-bold mb-3 text-center text-purple-700">üîç Kenal Pasti Jenis Kata</h3>
              <p class="text-center mb-3 text-purple-600 text-sm">Tap pada kata untuk menganalisisnya</p>
              
              <div class="p-3 bg-white rounded-xl mb-4">
                <p class="text-lg mb-3 leading-relaxed text-center" id="sentence-to-analyze">
                  <span class="interactive-word hover:bg-yellow-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('Penonton', 'noun')">Penonton</span>
                  <span class="interactive-word hover:bg-green-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('menonton', 'verb')">menonton</span>
                  <span class="interactive-word hover:bg-yellow-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('filem', 'noun')">filem</span>
                  <span class="interactive-word hover:bg-pink-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('menghiburkan', 'adjective')">yang menghiburkan</span>
                  <span class="interactive-word hover:bg-purple-200 px-3 py-2 rounded cursor-pointer text-base" onclick="analyzeWord('dengan penuh minat', 'adverb')">dengan penuh minat</span>.
                </p>
                <p class="text-sm text-center text-gray-600"><em>English: "The audience watches an entertaining movie with great interest."</em></p>
                <div id="word-analysis" class="mt-3"></div>
              </div>
              
              <div class="grid grid-cols-2 gap-3">
                <div class="category-card noun text-center p-4">
                  <div class="text-3xl mb-2">üè∑Ô∏è</div>
                  <div class="font-bold text-yellow-700 text-sm">Kata Nama</div>
                  <div class="text-xs text-yellow-600">Nouns</div>
                  <div id="noun-count" class="text-xs text-yellow-600 mt-1">0 dipilih</div>
                </div>
                <div class="category-card verb text-center p-4">
                  <div class="text-3xl mb-2">‚ö°</div>
                  <div class="font-bold text-green-700 text-sm">Kata Kerja</div>
                  <div class="text-xs text-green-600">Verbs</div>
                  <div id="verb-count" class="text-xs text-green-600 mt-1">0 dipilih</div>
                </div>
                <div class="category-card adjective text-center p-4">
                  <div class="text-3xl mb-2">üé®</div>
                  <div class="font-bold text-pink-700 text-sm">Kata Adjektif</div>
                  <div class="text-xs text-pink-600">Adjectives</div>
                  <div id="adjective-count" class="text-xs text-pink-600 mt-1">0 dipilih</div>
                </div>
                <div class="category-card adverb text-center p-4">
                  <div class="text-3xl mb-2">üìç</div>
                  <div class="font-bold text-purple-700 text-sm">Kata Keterangan</div>
                  <div class="text-xs text-purple-600">Adverbs</div>
                  <div id="adverb-count" class="text-xs text-purple-600 mt-1">0 dipilih</div>
                </div>
              </div>
            </div>
          </div>
        `
      },

      {
        title: "Tahniah!",
        content: `
          <div class="text-center animate-fade-in">
            <div class="mb-8">
              <div class="inline-block p-6 rounded-full glass-effect mb-6">
                <div class="text-8xl">üéâ</div>
              </div>
            </div>
            <h2 class="slide-title text-5xl mb-6">Tahniah!</h2>
            <div class="max-w-3xl mx-auto glass-effect p-6 rounded-2xl mb-10">
              <p class="text-2xl text-gray-700 leading-relaxed">Anda telah berjaya mempelajari 4 jenis kata utama dalam konteks hiburan dan rekreasi!</p>
            </div>
            
            <div class="grid md:grid-cols-2 gap-8 mb-10">
              <div class="category-card">
                <div class="text-center mb-4">
                  <div class="text-4xl mb-2">üåü</div>
                  <h3 class="text-2xl font-bold text-green-700">Pencapaian Hari Ini</h3>
                </div>
                <ul class="text-left space-y-3">
                  <li class="flex items-center"><span class="text-green-500 mr-3">‚úÖ</span> Kata nama dalam hiburan</li>
                  <li class="flex items-center"><span class="text-green-500 mr-3">‚úÖ</span> Kata kerja aktiviti rekreasi</li>
                  <li class="flex items-center"><span class="text-green-500 mr-3">‚úÖ</span> Kata adjektif untuk menggambarkan hiburan</li>
                  <li class="flex items-center"><span class="text-green-500 mr-3">‚úÖ</span> Kata keterangan dalam konteks rekreasi</li>
                </ul>
              </div>
              <div class="category-card">
                <div class="text-center mb-4">
                  <div class="text-4xl mb-2">üöÄ</div>
                  <h3 class="text-2xl font-bold text-blue-700">Langkah Seterusnya</h3>
                </div>
                <ul class="text-left space-y-3">
                  <li class="flex items-center"><span class="text-blue-500 mr-3">üìù</span> Berlatih dengan teks lain</li>
                  <li class="flex items-center"><span class="text-blue-500 mr-3">üé≠</span> Gunakan dalam penulisan kreatif</li>
                  <li class="flex items-center"><span class="text-blue-500 mr-3">üìö</span> Baca lebih banyak bahan hiburan</li>
                  <li class="flex items-center"><span class="text-blue-500 mr-3">üó£Ô∏è</span> Amalkan dalam pertuturan harian</li>
                </ul>
              </div>
            </div>
            
            <button class="btn btn-primary text-xl px-10 py-4" onclick="restartPresentation()">
              üîÑ Ulang Semula Pembelajaran
            </button>
          </div>
        `
      }
    ];

    let wordCounts = {
      noun: 0,
      verb: 0,
      adjective: 0,
      adverb: 0
    };

    let draggedElement = null;
    let sentenceWords = [];
    let currentExercise = 0;
    let currentSentenceExercise = 0;

    // Exercise data for Activity 1
    const matchingExercises = [
      {
        pictures: [
          { emoji: "üé¨", answer: "filem", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üëÄ", answer: "menonton", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "‚≠ê", answer: "menarik", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üòä", answer: "dengan gembira", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "filem", translation: "movie", type: "noun" },
          { word: "menonton", translation: "watch", type: "verb" },
          { word: "menarik", translation: "interesting", type: "adjective" },
          { word: "dengan gembira", translation: "happily", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üé≠", answer: "teater", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üíÉ", answer: "menari", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üéâ", answer: "meriah", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üåô", answer: "pada malam", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "teater", translation: "theater", type: "noun" },
          { word: "menari", translation: "dance", type: "verb" },
          { word: "meriah", translation: "lively", type: "adjective" },
          { word: "pada malam", translation: "at night", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üé§", answer: "penyanyi", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üéµ", answer: "bernyanyi", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üòÇ", answer: "lucu", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üèüÔ∏è", answer: "di stadium", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "penyanyi", translation: "singer", type: "noun" },
          { word: "bernyanyi", translation: "sing", type: "verb" },
          { word: "lucu", translation: "funny", type: "adjective" },
          { word: "di stadium", translation: "at stadium", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üé™", answer: "sirkus", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "ü§π", answer: "bermain", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üòç", answer: "mengagumkan", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üëè", answer: "dengan tepukan", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "sirkus", translation: "circus", type: "noun" },
          { word: "bermain", translation: "play", type: "verb" },
          { word: "mengagumkan", translation: "amazing", type: "adjective" },
          { word: "dengan tepukan", translation: "with applause", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üé®", answer: "galeri", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üëÅÔ∏è", answer: "melihat", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üåà", answer: "berwarna-warni", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üö∂", answer: "dengan perlahan", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "galeri", translation: "gallery", type: "noun" },
          { word: "melihat", translation: "see", type: "verb" },
          { word: "berwarna-warni", translation: "colorful", type: "adjective" },
          { word: "dengan perlahan", translation: "slowly", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üéÆ", answer: "permainan", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üïπÔ∏è", answer: "bermain", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üî•", answer: "sengit", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "‚ö°", answer: "dengan pantas", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "permainan", translation: "game", type: "noun" },
          { word: "bermain", translation: "play", type: "verb" },
          { word: "sengit", translation: "intense", type: "adjective" },
          { word: "dengan pantas", translation: "quickly", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üìö", answer: "buku", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üìñ", answer: "membaca", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "ü§î", answer: "menarik perhatian", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "ü§´", answer: "dengan senyap", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "buku", translation: "book", type: "noun" },
          { word: "membaca", translation: "read", type: "verb" },
          { word: "menarik perhatian", translation: "captivating", type: "adjective" },
          { word: "dengan senyap", translation: "quietly", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üèä", answer: "kolam", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üèä‚Äç‚ôÇÔ∏è", answer: "berenang", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "‚ùÑÔ∏è", answer: "sejuk", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üåÖ", answer: "pada pagi", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "kolam", translation: "pool", type: "noun" },
          { word: "berenang", translation: "swim", type: "verb" },
          { word: "sejuk", translation: "cool", type: "adjective" },
          { word: "pada pagi", translation: "in the morning", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üé∏", answer: "muzik", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üé∂", answer: "mendengar", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üíñ", answer: "romantik", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üåÉ", answer: "pada waktu malam", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "muzik", translation: "music", type: "noun" },
          { word: "mendengar", translation: "listen", type: "verb" },
          { word: "romantik", translation: "romantic", type: "adjective" },
          { word: "pada waktu malam", translation: "at night time", type: "adverb" }
        ]
      },
      {
        pictures: [
          { emoji: "üèÉ", answer: "pelari", type: "noun", hint: "Drop kata nama di sini" },
          { emoji: "üèÉ‚Äç‚ôÄÔ∏è", answer: "berlari", type: "verb", hint: "Drop kata kerja di sini" },
          { emoji: "üí™", answer: "kuat", type: "adjective", hint: "Drop kata adjektif di sini" },
          { emoji: "üå≥", answer: "di taman", type: "adverb", hint: "Drop kata keterangan di sini" }
        ],
        words: [
          { word: "pelari", translation: "runner", type: "noun" },
          { word: "berlari", translation: "run", type: "verb" },
          { word: "kuat", translation: "strong", type: "adjective" },
          { word: "di taman", translation: "in the park", type: "adverb" }
        ]
      }
    ];

    // Sentence exercises for Activity 2
    const sentenceExercises = [
      {
        target: "Penonton menonton filem yang menarik dengan gembira.",
        english: "The audience watches an interesting movie happily.",
        words: ["Penonton", "menonton", "filem", "yang", "menarik", "dengan gembira"],
        translations: ["audience", "watches", "movie", "that", "interesting", "happily"]
      },
      {
        target: "Pelakon bermain dengan penuh semangat di panggung.",
        english: "The actor performs with full spirit on stage.",
        words: ["Pelakon", "bermain", "dengan penuh semangat", "di", "panggung"],
        translations: ["actor", "performs", "with full spirit", "at", "stage"]
      },
      {
        target: "Penyanyi bernyanyi lagu yang meriah pada malam itu.",
        english: "The singer sings a lively song that night.",
        words: ["Penyanyi", "bernyanyi", "lagu", "yang", "meriah", "pada malam itu"],
        translations: ["singer", "sings", "song", "that", "lively", "that night"]
      },
      {
        target: "Kanak-kanak bermain permainan yang menggembirakan di taman.",
        english: "Children play exciting games in the park.",
        words: ["Kanak-kanak", "bermain", "permainan", "yang", "menggembirakan", "di taman"],
        translations: ["children", "play", "games", "that", "exciting", "in the park"]
      },
      {
        target: "Pelawat melihat lukisan yang indah dengan kagum.",
        english: "Visitors see beautiful paintings with admiration.",
        words: ["Pelawat", "melihat", "lukisan", "yang", "indah", "dengan kagum"],
        translations: ["visitors", "see", "paintings", "that", "beautiful", "with admiration"]
      },
      {
        target: "Penari menari tarian yang anggun di atas pentas.",
        english: "The dancer dances gracefully on the stage.",
        words: ["Penari", "menari", "tarian", "yang", "anggun", "di atas pentas"],
        translations: ["dancer", "dances", "dance", "that", "graceful", "on the stage"]
      },
      {
        target: "Ahli muzik memainkan lagu yang santai pada petang itu.",
        english: "Musicians play relaxing songs that evening.",
        words: ["Ahli muzik", "memainkan", "lagu", "yang", "santai", "pada petang itu"],
        translations: ["musicians", "play", "songs", "that", "relaxing", "that evening"]
      },
      {
        target: "Pelancong menyaksikan pertunjukan yang hebat dengan teruja.",
        english: "Tourists watch amazing performances excitedly.",
        words: ["Pelancong", "menyaksikan", "pertunjukan", "yang", "hebat", "dengan teruja"],
        translations: ["tourists", "watch", "performances", "that", "amazing", "excitedly"]
      },
      {
        target: "Keluarga menonton teater yang menghiburkan pada hujung minggu.",
        english: "The family watches entertaining theater on weekends.",
        words: ["Keluarga", "menonton", "teater", "yang", "menghiburkan", "pada hujung minggu"],
        translations: ["family", "watches", "theater", "that", "entertaining", "on weekends"]
      },
      {
        target: "Peminat bersorak dengan kuat semasa konsert berlangsung.",
        english: "Fans cheer loudly during the concert.",
        words: ["Peminat", "bersorak", "dengan kuat", "semasa", "konsert", "berlangsung"],
        translations: ["fans", "cheer", "loudly", "during", "concert", "takes place"]
      }
    ];

    function renderSlide() {
      const slideContent = document.getElementById('slide-content');
      slideContent.innerHTML = slides[currentSlide].content;
      
      // Update progress
      const progress = ((currentSlide + 1) / slides.length) * 100;
      document.getElementById('progress-bar').style.width = `${progress}%`;
      
      // Update counter
      document.getElementById('slide-counter').textContent = `Slaid ${currentSlide + 1} / ${slides.length}`;
      
      // Update navigation buttons
      document.getElementById('prev-btn').disabled = currentSlide === 0;
      document.getElementById('next-btn').disabled = currentSlide === slides.length - 1;
      
      if (currentSlide === slides.length - 1) {
        document.getElementById('next-btn').textContent = 'Tamat';
      } else {
        document.getElementById('next-btn').textContent = 'Seterusnya ‚Üí';
      }

      // Initialize drag and drop for activities
      setTimeout(() => {
        if (currentSlide === 6) { // Activity 1
          loadAllMatchingExercises();
        } else if (currentSlide === 7) { // Activity 2
          loadAllSentenceExercises();
        }
        initializeDragAndDrop();
      }, 100);
    }

    function loadAllMatchingExercises() {
      const pictureGrid = document.getElementById('all-pictures-grid');
      const wordOptions = document.getElementById('all-word-options');
      
      if (!pictureGrid || !wordOptions) return;
      
      // Collect all pictures and words
      let allPictures = [];
      let allWords = [];
      
      matchingExercises.forEach((exercise, exerciseIndex) => {
        exercise.pictures.forEach((pic, picIndex) => {
          allPictures.push({
            ...pic,
            id: `ex${exerciseIndex}_pic${picIndex}`
          });
        });
        
        exercise.words.forEach((word, wordIndex) => {
          allWords.push({
            ...word,
            id: `ex${exerciseIndex}_word${wordIndex}`
          });
        });
      });
      
      // Randomize the words array
      allWords = shuffleArray(allWords);
      
      // Load all pictures
      pictureGrid.innerHTML = '';
      allPictures.forEach(pic => {
        const colorClass = pic.type === 'noun' ? 'border-yellow-300' :
                          pic.type === 'verb' ? 'border-green-300' :
                          pic.type === 'adjective' ? 'border-pink-300' : 'border-purple-300';
        
        const div = document.createElement('div');
        div.className = `drop-zone p-3 border-2 border-dashed ${colorClass} rounded-lg text-center bg-white`;
        div.dataset.answer = pic.answer;
        div.dataset.id = pic.id;
        div.innerHTML = `
          <div class="text-3xl mb-1">${pic.emoji}</div>
          <div class="text-xs text-gray-600">${pic.type === 'noun' ? 'Kata Nama' : 
                                                pic.type === 'verb' ? 'Kata Kerja' :
                                                pic.type === 'adjective' ? 'Kata Adjektif' : 'Kata Keterangan'}</div>
        `;
        pictureGrid.appendChild(div);
      });
      
      // Load all randomized words
      wordOptions.innerHTML = '';
      allWords.forEach(word => {
        const colorClass = word.type === 'noun' ? 'bg-yellow-100 border-yellow-300 text-yellow-800' :
                          word.type === 'verb' ? 'bg-green-100 border-green-300 text-green-800' :
                          word.type === 'adjective' ? 'bg-pink-100 border-pink-300 text-pink-800' : 
                          'bg-purple-100 border-purple-300 text-purple-800';
        
        const div = document.createElement('div');
        div.className = `draggable-word p-2 ${colorClass} border-2 rounded-lg text-center cursor-move hover:shadow-lg transition-all text-sm h-16 flex flex-col justify-center`;
        div.draggable = true;
        div.dataset.word = word.word;
        div.dataset.id = word.id;
        div.innerHTML = `
          <div class="font-bold">${word.word}</div>
          <div class="text-xs opacity-75">(${word.translation})</div>
        `;
        wordOptions.appendChild(div);
      });
      
      // Clear feedback
      const feedback = document.getElementById('activity1-feedback');
      if (feedback) feedback.innerHTML = '';
    }

    // Shuffle array function
    function shuffleArray(array) {
      const shuffled = [...array];
      for (let i = shuffled.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
      }
      return shuffled;
    }

    function loadAllSentenceExercises() {
      const container = document.getElementById('all-sentence-exercises');
      
      if (!container) return;
      
      container.innerHTML = '';
      
      sentenceExercises.forEach((exercise, index) => {
        // Randomize words for each exercise
        const randomizedWords = shuffleArray([...exercise.words]);
        const randomizedTranslations = randomizedWords.map(word => {
          const originalIndex = exercise.words.indexOf(word);
          return exercise.translations[originalIndex];
        });
        
        const exerciseDiv = document.createElement('div');
        exerciseDiv.className = 'p-3 bg-white rounded-xl border-2 border-green-200';
        exerciseDiv.innerHTML = `
          <div class="mb-3">
            <h4 class="text-md font-bold text-green-700 mb-2">Ayat ${index + 1}:</h4>
            <p class="text-md text-blue-800 font-medium mb-1">"${exercise.target}"</p>
            <p class="text-xs text-blue-600"><em>English: "${exercise.english}"</em></p>
          </div>
          
          <div class="space-y-3">
            <div>
              <h5 class="text-sm font-bold mb-2 text-yellow-700">Kata-kata Tersedia:</h5>
              <div class="sentence-word-bank-${index} grid grid-cols-2 gap-2">
                ${randomizedWords.map((word, wordIndex) => `
                  <div class="sentence-word p-3 bg-yellow-100 border-2 border-yellow-300 rounded-lg text-center cursor-pointer hover:shadow-lg transition-all text-sm min-h-16 flex flex-col justify-center" 
                       draggable="true" 
                       data-word="${word}" 
                       data-exercise="${index}">
                    <div class="font-bold text-xs">${word}</div>
                    <div class="text-xs text-gray-600">(${randomizedTranslations[wordIndex]})</div>
                  </div>
                `).join('')}
              </div>
            </div>
            
            <div>
              <h5 class="text-sm font-bold mb-2 text-green-700">Kotak Ayat:</h5>
              <div class="sentence-builder-${index} min-h-20 p-3 border-2 border-dashed border-green-300 rounded-lg bg-gray-50 mb-3" 
                   data-exercise="${index}">
                <div class="text-gray-400 text-center text-xs">Klik kata-kata untuk menambah</div>
              </div>
              <button class="w-full btn btn-primary text-xs py-3" onclick="checkIndividualSentence(${index})">Semak Ayat ${index + 1}</button>
            </div>
          </div>
          
          <div class="sentence-feedback-${index} mt-3"></div>
        `;
        
        container.appendChild(exerciseDiv);
      });
    }



    let selectedWord = null;

    function initializeDragAndDrop() {
      // Activity 1: Click-based matching (easier for iPad)
      const clickableWords = document.querySelectorAll('.draggable-word');
      const dropZones = document.querySelectorAll('.drop-zone');

      // Add click handlers to words
      clickableWords.forEach(word => {
        word.addEventListener('click', (e) => {
          // Clear previous selection
          clickableWords.forEach(w => w.classList.remove('selected-word'));
          
          // Select this word - handle both direct click and nested elements
          const wordElement = e.target.closest('.draggable-word');
          selectedWord = wordElement.dataset.word;
          wordElement.classList.add('selected-word');
          
          // Show feedback
          showWordSelectionFeedback(selectedWord);
        });
      });

      // Add click handlers to picture zones
      dropZones.forEach(zone => {
        zone.addEventListener('click', (e) => {
          if (!selectedWord) {
            showNoWordSelectedFeedback();
            return;
          }
          
          const correctAnswer = zone.dataset.answer;
          
          if (selectedWord === correctAnswer && !zone.dataset.completed) {
            const originalEmoji = zone.querySelector('div').textContent;
            zone.innerHTML = `
              <div class="text-2xl mb-1">${originalEmoji}</div>
              <div class="text-sm font-bold text-green-600">${selectedWord} ‚úì</div>
              <div class="text-xs text-green-500">Betul!</div>
            `;
            zone.style.backgroundColor = '#dcfce7';
            zone.style.borderColor = '#16a34a';
            zone.dataset.completed = 'true';
            
            // Hide the used word
            const usedWordElement = document.querySelector(`[data-word="${selectedWord}"]`);
            if (usedWordElement) {
              usedWordElement.style.opacity = '0.3';
              usedWordElement.style.pointerEvents = 'none';
              usedWordElement.classList.remove('selected-word');
            }
            
            selectedWord = null;
            completedMatches++;
            updateMatchingProgress();
            clearWordSelectionFeedback();
          } else if (zone.dataset.completed) {
            showAlreadyCompletedFeedback();
          } else {
            zone.style.backgroundColor = '#fef2f2';
            zone.style.borderColor = '#dc2626';
            showWrongMatchFeedback();
            setTimeout(() => {
              zone.style.backgroundColor = 'white';
              zone.style.borderColor = zone.classList.contains('border-yellow-300') ? '#fde047' : 
                                      zone.classList.contains('border-green-300') ? '#86efac' :
                                      zone.classList.contains('border-pink-300') ? '#f9a8d4' : '#c4b5fd';
            }, 1000);
          }
        });
      });

      // Activity 2: Click-based sentence building (easier for iPad)
      const sentenceWords = document.querySelectorAll('.sentence-word');
      const sentenceBuilders = document.querySelectorAll('[class*="sentence-builder-"]');

      // Add click handlers to sentence words
      sentenceWords.forEach(word => {
        word.addEventListener('click', (e) => {
          const wordElement = e.target.closest('.sentence-word');
          const wordText = wordElement.dataset.word;
          const exerciseIndex = wordElement.dataset.exercise;
          const builder = document.querySelector(`.sentence-builder-${exerciseIndex}`);
          
          // Clear placeholder text if present
          if (builder.querySelector('.text-gray-400')) {
            builder.innerHTML = '';
          }
          
          // Add word to sentence builder
          const wordSpan = document.createElement('span');
          wordSpan.className = 'inline-block m-1 p-2 bg-blue-100 border border-blue-300 rounded-lg cursor-pointer text-sm';
          wordSpan.textContent = wordText;
          wordSpan.onclick = () => {
            wordSpan.remove();
            if (builder.children.length === 0) {
              builder.innerHTML = '<div class="text-gray-400 text-center text-sm">Klik kata-kata untuk menambah</div>';
            }
            
            // Re-enable the word in word bank
            wordElement.style.opacity = '1';
            wordElement.style.pointerEvents = 'auto';
          };
          
          builder.appendChild(wordSpan);
          
          // Disable the word in word bank
          wordElement.style.opacity = '0.5';
          wordElement.style.pointerEvents = 'none';
        });

        // Keep drag functionality as backup
        word.addEventListener('dragstart', (e) => {
          draggedElement = e.target;
          e.dataTransfer.setData('text/plain', e.target.dataset.word);
          e.dataTransfer.setData('exercise', e.target.dataset.exercise);
        });
      });

      // Keep drag and drop functionality for sentence builders as backup
      sentenceBuilders.forEach(builder => {
        builder.addEventListener('dragover', (e) => {
          e.preventDefault();
          builder.style.backgroundColor = '#f0f9ff';
        });

        builder.addEventListener('dragleave', (e) => {
          builder.style.backgroundColor = '#f9fafb';
        });

        builder.addEventListener('drop', (e) => {
          e.preventDefault();
          builder.style.backgroundColor = '#f9fafb';
          
          const droppedWord = e.dataTransfer.getData('text/plain');
          const exerciseIndex = e.dataTransfer.getData('exercise');
          const builderExercise = builder.dataset.exercise;
          
          // Only allow words from the same exercise
          if (exerciseIndex !== builderExercise) {
            return;
          }
          
          if (builder.querySelector('.text-gray-400')) {
            builder.innerHTML = '';
          }
          
          const wordElement = document.createElement('span');
          wordElement.className = 'inline-block m-1 p-2 bg-blue-100 border border-blue-300 rounded-lg cursor-pointer text-sm';
          wordElement.textContent = droppedWord;
          wordElement.onclick = () => {
            wordElement.remove();
            if (builder.children.length === 0) {
              builder.innerHTML = '<div class="text-gray-400 text-center text-sm">Klik kata-kata untuk menambah</div>';
            }
            
            // Re-enable the word in word bank
            const wordBank = document.querySelector(`.sentence-word-bank-${builderExercise}`);
            const words = wordBank.querySelectorAll('.sentence-word');
            words.forEach(w => {
              if (w.dataset.word === droppedWord) {
                w.style.opacity = '1';
                w.style.pointerEvents = 'auto';
              }
            });
          };
          
          builder.appendChild(wordElement);
          
          if (draggedElement) {
            draggedElement.style.opacity = '0.5';
            draggedElement.style.pointerEvents = 'none';
          }
        });
      });
    }



    let completedSentences = 0;
    let completedMatches = 0;

    function checkIndividualSentence(exerciseIndex) {
      const sentenceBuilder = document.querySelector(`.sentence-builder-${exerciseIndex}`);
      const words = Array.from(sentenceBuilder.children).map(child => child.textContent);
      const currentExerciseData = sentenceExercises[exerciseIndex];
      const targetWords = currentExerciseData.words;
      
      const feedback = document.querySelector(`.sentence-feedback-${exerciseIndex}`);
      
      if (words.length === 0) {
        feedback.innerHTML = `
          <div class="p-3 bg-yellow-100 border-2 border-yellow-300 rounded-lg">
            <p class="text-yellow-700 text-sm">Sila seret kata-kata ke kotak ayat terlebih dahulu.</p>
            <p class="text-yellow-600 text-xs">Please drag words to the sentence box first.</p>
          </div>
        `;
        return;
      }
      
      if (JSON.stringify(words) === JSON.stringify(targetWords)) {
        feedback.innerHTML = `
          <div class="p-3 bg-green-100 border-2 border-green-300 rounded-lg">
            <div class="text-2xl mb-1">üéâ</div>
            <h3 class="text-lg font-bold text-green-700 mb-1">Sempurna! (Perfect!)</h3>
            <p class="text-sm text-green-600">Ayat ${exerciseIndex + 1} betul dan lengkap!</p>
          </div>
        `;
        
        // Mark as completed and update progress
        if (!sentenceBuilder.dataset.completed) {
          sentenceBuilder.dataset.completed = 'true';
          completedSentences++;
          updateSentenceProgress();
        }
      } else {
        feedback.innerHTML = `
          <div class="p-3 bg-red-100 border-2 border-red-300 rounded-lg">
            <h3 class="text-md font-bold text-red-700 mb-1">Cuba lagi! (Try again!)</h3>
            <p class="text-sm text-red-600">Susunan kata tidak tepat. Klik pada kata untuk mengeluarkannya.</p>
          </div>
        `;
      }
    }

    function updateSentenceProgress() {
      const progressDisplay = document.getElementById('sentence-progress');
      if (progressDisplay) {
        progressDisplay.textContent = `Kemajuan: ${completedSentences} / 10 ayat siap`;
        
        if (completedSentences === 10) {
          progressDisplay.innerHTML = `
            <div class="text-2xl text-green-600">üéâ Tahniah! Semua 10 ayat telah siap!</div>
            <div class="text-lg text-green-500">Congratulations! All 10 sentences completed!</div>
          `;
        }
      }
    }

    function updateMatchingProgress() {
      const progressDisplay = document.getElementById('progress-display');
      if (progressDisplay) {
        progressDisplay.textContent = `Kemajuan: ${completedMatches} / 40 padanan betul`;
        
        if (completedMatches === 40) {
          const feedback = document.getElementById('activity1-feedback');
          feedback.innerHTML = `
            <div class="p-6 bg-green-100 border-2 border-green-300 rounded-2xl">
              <div class="text-4xl mb-2">üéâ</div>
              <h3 class="text-2xl font-bold text-green-700 mb-2">Tahniah! (Congratulations!)</h3>
              <p class="text-lg text-green-600">Anda telah berjaya padankan semua 40 kata dengan gambar yang betul!</p>
              <p class="text-md text-green-500">You have successfully matched all 40 words with the correct pictures!</p>
            </div>
          `;
        }
      }
    }

    function showWordSelectionFeedback(word) {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-blue-100 border-2 border-blue-300 rounded-xl">
          <p class="text-blue-700 font-bold">‚ú® Kata dipilih: "${word}"</p>
          <p class="text-blue-600 text-sm">Sekarang klik pada gambar yang sesuai!</p>
          <p class="text-blue-500 text-xs"><em>Word selected: "${word}" - Now click on the matching picture!</em></p>
        </div>
      `;
    }

    function showNoWordSelectedFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-yellow-100 border-2 border-yellow-300 rounded-xl">
          <p class="text-yellow-700 font-bold">‚ö†Ô∏è Pilih kata terlebih dahulu!</p>
          <p class="text-yellow-600 text-sm">Klik pada kata yang anda mahu padankan.</p>
          <p class="text-yellow-500 text-xs"><em>Please select a word first by clicking on it!</em></p>
        </div>
      `;
    }

    function showWrongMatchFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-red-100 border-2 border-red-300 rounded-xl">
          <p class="text-red-700 font-bold">‚ùå Tidak tepat!</p>
          <p class="text-red-600 text-sm">Cuba pilih gambar yang lain.</p>
          <p class="text-red-500 text-xs"><em>Not correct! Try selecting a different picture.</em></p>
        </div>
      `;
    }

    function showAlreadyCompletedFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = `
        <div class="p-4 bg-gray-100 border-2 border-gray-300 rounded-xl">
          <p class="text-gray-700 font-bold">‚ÑπÔ∏è Sudah siap!</p>
          <p class="text-gray-600 text-sm">Gambar ini sudah ada padanannya.</p>
          <p class="text-gray-500 text-xs"><em>This picture already has its match!</em></p>
        </div>
      `;
    }

    function clearWordSelectionFeedback() {
      const feedback = document.getElementById('activity1-feedback');
      feedback.innerHTML = '';
    }

    function nextSlide() {
      if (currentSlide < slides.length - 1) {
        currentSlide++;
        renderSlide();
      }
    }

    function previousSlide() {
      if (currentSlide > 0) {
        currentSlide--;
        renderSlide();
      }
    }

    function analyzeWord(word, type) {
      const analysisDiv = document.getElementById('word-analysis');
      const typeNames = {
        noun: 'Kata Nama',
        verb: 'Kata Kerja', 
        adjective: 'Kata Adjektif',
        adverb: 'Kata Keterangan'
      };
      
      const colors = {
        noun: 'yellow',
        verb: 'green',
        adjective: 'pink',
        adverb: 'purple'
      };
      
      const explanations = {
        'Penonton': 'Kata nama - merujuk kepada orang yang menonton',
        'menonton': 'Kata kerja - perbuatan melihat persembahan',
        'filem': 'Kata nama - jenis hiburan',
        'menghiburkan': 'Kata adjektif - sifat yang menggambarkan filem',
        'dengan penuh minat': 'Kata keterangan - cara menonton'
      };
      
      wordCounts[type]++;
      updateWordCounts();
      
      analysisDiv.innerHTML = `
        <div class="p-4 bg-${colors[type]}-100 border border-${colors[type]}-300 rounded-lg">
          <h4 class="font-bold text-${colors[type]}-800 mb-2">${typeNames[type]}: "${word}"</h4>
          <p class="text-${colors[type]}-700">${explanations[word]}</p>
        </div>
      `;
    }

    function updateWordCounts() {
      document.getElementById('noun-count').textContent = `${wordCounts.noun} dipilih`;
      document.getElementById('verb-count').textContent = `${wordCounts.verb} dipilih`;
      document.getElementById('adjective-count').textContent = `${wordCounts.adjective} dipilih`;
      document.getElementById('adverb-count').textContent = `${wordCounts.adverb} dipilih`;
    }

    function restartPresentation() {
      currentSlide = 0;
      wordCounts = { noun: 0, verb: 0, adjective: 0, adverb: 0 };
      renderSlide();
    }

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowRight') nextSlide();
      if (e.key === 'ArrowLeft') previousSlide();
      if (e.key === 'f' || e.key === 'F') toggleFullscreen();
    });

    function toggleFullscreen() {
      if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen().catch(err => {
          console.log('Cannot enter fullscreen mode');
        });
      } else {
        document.exitFullscreen();
      }
    }

    // Initialize Element SDK
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig: defaultConfig,
        onConfigChange: async (config) => {
          // Update presentation title if needed
          if (currentSlide === 0) {
            renderSlide();
          }
        },
        mapToCapabilities: (config) => ({
          recolorables: [
            {
              get: () => config.primary_color || '#3b82f6',
              set: (value) => {
                window.elementSdk.setConfig({ primary_color: value });
              }
            },
            {
              get: () => config.secondary_color || '#ec4899',
              set: (value) => {
                window.elementSdk.setConfig({ secondary_color: value });
              }
            }
          ],
          borderables: [],
          fontEditable: {
            get: () => config.font_family || 'system-ui',
            set: (value) => {
              window.elementSdk.setConfig({ font_family: value });
            }
          },
          fontSizeable: undefined
        }),
        mapToEditPanelValues: (config) => new Map([
          ['presentation_title', config.presentation_title || defaultConfig.presentation_title],
          ['topic_theme', config.topic_theme || defaultConfig.topic_theme]
        ])
      });
    }

    // Initialize
    renderSlide();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'995ae439d470f004',t:'MTc2MTY1OTMxNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>